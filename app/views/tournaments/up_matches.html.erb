<%= link_to "Back to #{@tournament.name}", "/tournaments/#{@tournament.id}", :class=>"btn btn-default"%>
<script>
  $(document).ready(function() {
     $('#matchList').dataTable();
  } );
</script>
<script>
  setTimeout("location.reload(true);",30000);
</script>
<br>
<br>
<h5 style="color:red">This page reloads every 30s</h5>
<br>
<br>
<h3>Upcoming Matches</h3>
<br>
<br>
<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th>Mat</th>
      <th>On Mat</th>
      <th>On Deck</th>
      <th>In The Hole</th>
      <th>Warm Up</th>
    </tr>
  </thead>

  <tbody>
    <% @mats.each.map do |m| %>
      <tr>
        <td><%= m.name %></td>
        <td><% if m.unfinishedMatches.first %><%=m.unfinishedMatches.first.bout_number%><br><%= m.unfinishedMatches.first.w1_name %> vs. <%= m.unfinishedMatches.first.w2_name %><% end %></td>
        <td><% if m.unfinishedMatches.second %><%=m.unfinishedMatches.second.bout_number%><br><%= m.unfinishedMatches.second.w1_name %> vs. <%= m.unfinishedMatches.second.w2_name %><% end %></td>
        <td><% if m.unfinishedMatches.third %><%=m.unfinishedMatches.third.bout_number%><br><%= m.unfinishedMatches.third.w1_name %> vs. <%= m.unfinishedMatches.third.w2_name %><% end %></td>
        <td><% if m.unfinishedMatches.fourth %><%=m.unfinishedMatches.fourth.bout_number%><br><%= m.unfinishedMatches.fourth.w1_name %> vs. <%= m.unfinishedMatches.fourth.w2_name %><% end %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<br>
<br>
<h3>Matches not assigned</h3>
<br>
<br>
<table class="display compact cell-border" id="matchList">
  <thead>
    <tr>
      <th>Round</th>
      <th>Bout Number</th>
      <th>Weight Class</th>
      <th>Matchup</th>
    </tr>
  </thead>

  <tbody>
    <% if @matches.size > 0 %>
    <% @matches.each.map do |m| %>
      <tr>
        <td>Round <%= m.round %></td>
        <td><%= m.bout_number %></td>
        <td><%= m.weight_max %> lbs</td>
        <td><%= m.w1_name %> vs. <%= m.w2_name %></td>
      </tr>
    <% end %>
    <% end %>
  </tbody>
</table>

<br>
